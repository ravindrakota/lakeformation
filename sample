-----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEAmVaV80vV14hawAq60bPdrIZ3ZSVvU1KXSH8eFs5r4EGKtdeciY+T+PaSjyYB
FHwcKbvDJM/dJTR9o8SR+srZIQ1PRrmHQ5SoKrLf1/pJ/ttPHvs0BO+tLvVKG4RV5gyNuyjVCixD
MrXNR5hFVgUiRQJl7LCkK0bWtaGHTlQsowXG2otYo2YUUwg35sjL1G90i2LgXygHbJWAtBG+uJ0V
cZrED5jt+mo4JDEwtyte4aU6QgcYXiP+l0p0EzPwGfZ+Sw0GZRdW3zUKpvsBct/npQV6dCA8pfU7
yUYppiA8eDc6pFV7vx8Yh2y1/WdTI4yzDPJyOU3h53ra4J1lvSj/OQIDAQABAoIBABl498oF9A0s
+p5iaeyCK7YIVHc6A8dctgL2EwKI4gTL/oX8vmVfs54tH+Wl05Ial/ca2O0Zlswibyiwc+usnOtP
sba3BVBltpX5RxQy4O30cq1b36VeR2/AkcIGdtqThUvtGY7qEXOwHdzh38rNaYb7QgFSysLhrrNX
lQmfFBc0kTuelVsRpbELqPbfXcgdEJ/scauTIKdje60eFhFg47v2zAs4OVYSYtSwop5OSeD3oDKD
MK2xC9veLVuEWNQSkkj1c4wYgX13p1X+94s3AkwA8x9C6rldhNg2kusWevejLzFPl2j+zy4pDqZM
0XDrteoRa73pgvYwFA38exWBBgECgYEA3WCpQBhWXiLhuuz6DWVGsFy0JIzW8psr0uAghoWlK6rY
dAAwMtlqY9cmU9luRkqXVtrWmyNJ5IlgeW+JDvkLT3GD69aOZ0z/QURpTbiZY1zM1OwxY7kXjM8D
toGXhn88HEAURpOdwZ/1323fCg81bILdgdauRESILriAEF9aAnkCgYEAsVHRtP3ttzTYTY75dDY8
GeprQdo+7ERq/onOrDUn/0ugMX3BXeNH5yJUXHS/49Fno3DkRl+0j15/H/a0ELwylmTpMdi4oe13
NUDXsP7mkQDHciW2gepwMjGOKaUfz/P+CdodBpkNmRj6zgQ/C2hamE3CgJ0xDfioFFjS1qv9ssEC
gYEAsFYtmwOH0GZCni3jpEX2v8aoK7EQCqG1j7y9y8mq3pSw4/2+ZtKuHycivYmlgFIsKKAab+r1
EhingzNn3khcTQSjy3jVZ816SZfftWwEqpQiCLy3PrMR4jSHxZmGhDjXPb2BKRKuh6wOItIW5qFk
sbGwFZtWpsRcIbMPN3tsbCkCgYBjWpXnFNTKb5i3NGI/pFfeqYO5nUDef6N3xd2AjjRADq7OrEjZ
g4z5TDn6qAwQ6Xdpk8rER8HTBz6xuTjBm8G4lQg4vtcNHBJMS23PpbOpEcevBMSTXLnK1gty+Cuw
CGWSPZ0/4ihFXULChoyQpsMETaWrDOi8jFQZOn/AexQmwQKBgGO96uOZK+BoRiJfLHXtDvmaPXtR
Ri4nkJd4pDTaKisp9GzSTKDo2BTTMXyILpqtehaYOB/0//3GzM1ZTX8OaNUrj40cBML45Fi6dQL5
nc+wZmZrPE6qJVjSi8QaeA3h+sL48KZXoBEQl1DgKMma03WwjUnMiln9kPke60HNhawR
-----END RSA PRIVATE KEY-----


import org.apache.log4j.Logger;
import org.codehaus.jackson.JsonParseException;
import org.codehaus.jackson.map.DeserializationConfig;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;
import java.io.IOException;
import java.util.Collection;

/**
 * JsonUtils used to change JSON strings into deserialized objects.
 */
public class JsonUtils {
    static Logger log = Logger.getLogger(JsonUtils.class);

    public static <T> T convertFromJson(String json, Class<T> valueType) {
        ObjectMapper om = new ObjectMapper();
        om.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);
        om.setVisibilityChecker(om.getSerializationConfig().getDefaultVisibilityChecker()
            .withFieldVisibility(org.codehaus.jackson.annotate.JsonAutoDetect.Visibility.ANY)
            .withGetterVisibility(org.codehaus.jackson.annotate.JsonAutoDetect.Visibility.NONE)
            .withSetterVisibility(org.codehaus.jackson.annotate.JsonAutoDetect.Visibility.NONE)
            .withCreatorVisibility(org.codehaus.jackson.annotate.JsonAutoDetect.Visibility.NONE));

        T id = null;
        try {
            id = om.readValue(json, valueType);
            return id;
        } catch (JsonParseException e) {
            log.error("convertFromJson", e);
        } catch (JsonMappingException e) {
            log.error("convertFromJson", e);
        } catch (IOException e) {
            log.error("convertFromJson", e);
        }
        return null;
    }

    public static String convertToJson(Object ld) {
        try {
            String json;
            json = new ObjectMapper().writeValueAsString(ld);
            return json;
        } catch (IOException e) {
            log.error("convertToJson", e);
        }
        return null;
    }

    public static <T> T  convertFromJsonArray(String json , Class<? extends Collection> collectionClass, Class<?> elementClass){
        if(json != null && !json.isEmpty()){
            ObjectMapper om = new ObjectMapper();
            try {
                T id = om.readValue(json,
                        om.getTypeFactory().constructCollectionType(
                                collectionClass, elementClass));
                return id;

            } catch (JsonParseException e) {
                log.error("convertFromJsonArray",e);
            } catch (JsonMappingException e) {
                log.error("convertFromJsonArray",e);
            } catch (IOException e) {
                log.error("convertFromJsonArray",e);
            }
        }
        return null;
    }
}
